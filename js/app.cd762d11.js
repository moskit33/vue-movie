(function(){"use strict";var e={9169:function(e,t,r){r.d(t,{Z:function(){return M}});var n=r(3396);const o={class:"movie-list"},i={key:0,class:"container"},s={key:1,class:"not-found"};function a(e,t,r,a,c,u){const l=(0,n.up)("MovieItem");return(0,n.wg)(),(0,n.iD)("div",o,[e.moviesExist?((0,n.wg)(),(0,n.iD)("div",i,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.movieList,(e=>((0,n.wg)(),(0,n.j4)(l,{movie:e,key:e.id},null,8,["movie"])))),128))])):((0,n.wg)(),(0,n.iD)("div",s," No films found "))])}var c=r(7139);const u={class:"movie-item"},l=["data-url","alt"],d={class:"movie-info"},v={class:"movie-title"},f={class:"movie-year"},m={class:"movie-gengre"};function h(e,t,r,o,i,s){const a=(0,n.Q2)("lazyload");return(0,n.wg)(),(0,n.iD)("div",u,[(0,n.wy)(((0,n.wg)(),(0,n.iD)("figure",{onClick:t[0]||(t[0]=(...t)=>e.openDetails&&e.openDetails(...t)),class:"movie-poster__wrapper"},[(0,n._)("img",{class:"movie-poster","data-url":e.moviePosterUrl,alt:`${e.movieTitle} poster`},null,8,l)])),[[a]]),(0,n._)("div",d,[(0,n._)("h6",v,(0,c.zw)(e.movieTitle),1),(0,n._)("span",f,(0,c.zw)(e.movieYear),1)]),(0,n._)("p",m,(0,c.zw)(e.genres),1)])}r(7658);var p=r(7511),y=(0,n.aZ)({name:"movie-item",props:{movie:Object},setup(e){const t=(0,n.Fl)((()=>e.movie?.title)),r=(0,n.Fl)((()=>e.movie?.year)),o=(0,n.Fl)((()=>e.movie?.posterurl)),i=(0,n.Fl)((()=>e.movie?.genres.join(", "))),s=()=>{window.scrollTo({top:0}),p.Z.push(`/details/${e.movie?.id}`)};return{movieTitle:t,movieYear:r,moviePosterUrl:o,genres:i,openDetails:s}}}),g=r(7477);const B=(0,g.Z)(y,[["render",h],["__scopeId","data-v-72fa3bc1"]]);var b=B,w=(0,n.aZ)({name:"movie-list",props:{movieList:{type:Array,default:()=>[]}},components:{MovieItem:b},setup(e){const t=(0,n.Fl)((()=>e.movieList&&e.movieList.length>0));return{moviesExist:t}}});const _=(0,g.Z)(w,[["render",a],["__scopeId","data-v-f57a51fc"]]);var M=_},1320:function(e,t,r){r.d(t,{V0:function(){return n}});const n="https://www.shutterstock.com/image-vector/no-image-available-vector-illustration-600w-744886198.jpg"},9432:function(e,t,r){var n=r(9242),o=r(3396);function i(e,t){const r=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(r,{"search-query":e.$route.query.q,"search-by-param":e.$route.query.searchBy,"sort-by-param":e.$route.query.sortBy},null,8,["search-query","search-by-param","sort-by-param"])}var s=r(7477);const a={},c=(0,s.Z)(a,[["render",i]]);var u=c,l=r(7511),d=(r(7658),r(65)),v=r(4161);const f="https://tame-erin-pike-toga.cyclic.app";function m(e,t={}){const{method:r,params:n}=t;return(0,v.Z)({url:`${f}${e}`,method:r,params:n}).then((e=>e.data)).catch((e=>e))}class h{static fetchAllMovies({searchBy:e,sortBy:t,searchQuery:r}){return m("/movies",{params:{[`${e}_like`]:r,_sort:t,_order:"asc"}})}static fetchMovieById(e){return m(`/movies/${e}`)}static fetchMovieByGenre(e){return m("/movies",{params:{genres_like:e}})}}var p=(0,d.MT)({state:{searchInput:"",sortBy:"year",searchBy:"title",currentMovieDetails:null,searchedMovieList:[],movieListByGenre:[],isLoading:!0},getters:{},mutations:{setSortBy(e,t="year"){e.sortBy="duration"===t?"duration":"year"},setSearchBy(e,t="title"){e.searchBy="genres"===t?"genres":"title"},setSearchInput(e,t){e.searchInput=t},setSearchedMovieList(e,t){e.searchedMovieList=t},setCurrentMovieDetails(e,t){e.currentMovieDetails=t},setIsLoading(e,t){e.isLoading=t},setMovieListByGenre(e,t){e.movieListByGenre=t}},actions:{getAllMovies({state:e,commit:t}){t("setIsLoading",!0),h.fetchAllMovies({searchBy:e.searchBy,sortBy:e.sortBy,searchQuery:e.searchInput}).then((e=>t("setSearchedMovieList",e))).catch((e=>console.log(e))).finally((()=>t("setIsLoading",!1)))},getMovieById({state:e,commit:t},r){t("setIsLoading",!0),h.fetchMovieById(r).then((e=>{e&&(t("setCurrentMovieDetails",e),this.dispatch("getMovieByGenre",e.genres[0]))})).catch((e=>{l.Z.push("/notFound"),console.error("error",e)})).finally((()=>t("setIsLoading",!1)))},getMovieByGenre({state:e,commit:t},r){t("setIsLoading",!0),h.fetchMovieByGenre(r).then((e=>{t("setMovieListByGenre",e)})).catch((e=>console.log(e))).finally((()=>t("setIsLoading",!1)))}}}),y=r(1320),g={install(e){const t={mounted:e=>{function t(){const t=Array.from(e.children).find((e=>"IMG"===e.nodeName));t&&(t.addEventListener("load",(()=>{setTimeout((()=>e.classList.add("loaded")),100)})),t.addEventListener("error",(()=>t.src=y.V0)),t.src=t.dataset.url)}function r(r,n){r.forEach((r=>{r.isIntersecting&&(t(),n.unobserve(e))}))}function n(){const t={root:null,threshold:"0"},n=new IntersectionObserver(r,t);n.observe(e)}window["IntersectionObserver"]?n():t()}};e.directive("lazyload",t)}};const B=g;var b=B;const w=(0,n.ri)(u).use(p).use(l.Z).use(b);w.mount("#app")},7511:function(e,t,r){r.d(t,{Z:function(){return j}});var n=r(2483),o=r(3396),i=r(9242),s=r(7139),a=r(9377);const c=e=>((0,o.dD)("data-v-af336e56"),e=e(),(0,o.Cn)(),e),u={class:"hello"},l={class:"search-section"},d=c((()=>(0,o._)("h1",{class:"search-title"},"FIND YOUR MOVIE",-1))),v={class:"search-wrapper"},f={class:"searchBy"},m={class:"sorting-wrap"},h={class:"sorting"},p={class:"sorting-found"},y={key:0,class:"loader"},g=c((()=>(0,o._)("img",{src:a,alt:"loader"},null,-1))),B=[g];function b(e,t,r,n,a,c){const g=(0,o.up)("MovieButton"),b=(0,o.up)("MovieList");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",l,[d,(0,o._)("div",v,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.formattedSearchInput=t),onKeyup:t[1]||(t[1]=(0,i.D2)(((...t)=>e.getAllMovies&&e.getAllMovies(...t)),["enter"]))},null,544),[[i.nr,e.formattedSearchInput]]),(0,o.Wm)(g,{onClick:e.getAllMovies,"is-search":!0},{default:(0,o.w5)((()=>[(0,o.Uk)("SEARCH")])),_:1},8,["onClick"])]),(0,o._)("div",f,[(0,o.Uk)(" SEARCH BY "),(0,o.Wm)(g,{onClick:t[2]||(t[2]=t=>e.changeSearchBy("title")),"is-active":"title"===e.searchBy},{default:(0,o.w5)((()=>[(0,o.Uk)("TITLE")])),_:1},8,["is-active"]),(0,o.Wm)(g,{onClick:t[3]||(t[3]=t=>e.changeSearchBy("genres")),"is-active":"genres"===e.searchBy},{default:(0,o.w5)((()=>[(0,o.Uk)("GENRE")])),_:1},8,["is-active"])])]),(0,o._)("div",m,[(0,o._)("div",h,[(0,o._)("span",p,(0,s.zw)(e.searchedMovies.length)+" was found",1),(0,o.Uk)(" SORT BY "),(0,o.Wm)(g,{onClick:t[4]||(t[4]=t=>e.changeSortBy("year")),"is-active":"year"===e.sortBy},{default:(0,o.w5)((()=>[(0,o.Uk)("Release Date")])),_:1},8,["is-active"]),(0,o.Wm)(g,{onClick:t[5]||(t[5]=t=>e.changeSortBy("duration")),"is-active":"duration"===e.sortBy},{default:(0,o.w5)((()=>[(0,o.Uk)("Duration")])),_:1},8,["is-active"])])]),e.isLoading?((0,o.wg)(),(0,o.iD)("div",y,B)):((0,o.wg)(),(0,o.j4)(b,{key:1,movieList:e.searchedMovies},null,8,["movieList"]))])}r(7658);function w(e,t,r,n,i,a){return(0,o.wg)(),(0,o.iD)("button",{class:(0,s.C_)(["button",e.buttonClasses])},[(0,o.WI)(e.$slots,"default",{},void 0,!0)],2)}var _=(0,o.aZ)({name:"movie-button",props:{isSearch:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1}},setup(e){const t=(0,o.Fl)((()=>({"button--active":e.isActive||e.isSearch,"button--search":e.isSearch})));return{buttonClasses:t}}}),M=r(7477);const S=(0,M.Z)(_,[["render",w],["__scopeId","data-v-7b13940a"]]);var k=S,L=r(9169),I=r(65),C=(0,o.aZ)({name:"HomeView",props:{searchQuery:{type:String,default:""},searchByParam:{type:String,default:"title"},sortByParam:{type:String,default:"year"}},setup(e){const t=(0,I.oR)(),r=(0,n.tv)();t.commit("setSearchInput",e.searchQuery),t.commit("setSortBy",e.sortByParam),t.commit("setSearchBy",e.searchByParam),f();const i=(0,o.Fl)((()=>t.state.searchInput)),s=(0,o.Fl)((()=>t.state.sortBy)),a=(0,o.Fl)((()=>t.state.searchBy)),c=(0,o.Fl)((()=>t.state.searchedMovieList)),u=(0,o.Fl)((()=>t.state.isLoading)),l=(0,o.Fl)({get(){return i.value},set(e){console.log(e),t.commit("setSearchInput",e),r.push({query:{...r.currentRoute.value.query,q:e}})}});function d(e){t.commit("setSortBy",e),r.push({query:{...r.currentRoute.value.query,sortBy:e}}),f()}function v(e){t.commit("setSearchBy",e),r.push({query:{...r.currentRoute.value.query,searchBy:e}}),f()}function f(){t.dispatch("getAllMovies")}return{searchInput:i,sortBy:s,searchBy:a,searchedMovies:c,isLoading:u,changeSortBy:d,changeSearchBy:v,getAllMovies:f,formattedSearchInput:l}},components:{MovieList:L.Z,MovieButton:k}});const A=(0,M.Z)(C,[["render",b],["__scopeId","data-v-af336e56"]]);var D=A;const E=[{path:"/",name:"home",component:D,props:!0},{path:"/details/:id",name:"details",component:()=>r.e(194).then(r.bind(r,2333))},{path:"/:pathMatch(.*)*",name:"notFound",component:()=>r.e(229).then(r.bind(r,5229))}],O=(0,n.p7)({history:(0,n.PO)("vue-movie/"),routes:E});var j=O},9377:function(e,t,r){e.exports=r.p+"img/loader.2a1f49ff.gif"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.m=e,function(){var e=[];r.O=function(t,n,o,i){if(!n){var s=1/0;for(l=0;l<e.length;l++){n=e[l][0],o=e[l][1],i=e[l][2];for(var a=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(a=!1,i<s&&(s=i));if(a){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/"+e+"."+{194:"bf18fbea",229:"b33857b4"}[e]+".js"}}(),function(){r.miniCssF=function(e){return"css/"+e+"."+{194:"de703a8b",229:"78216acf"}[e]+".css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue-project:";r.l=function(n,o,i,s){if(e[n])e[n].push(o);else{var a,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(c=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+i),a.src=n),e[n]=[o];var v=function(t,r){a.onerror=a.onload=null,clearTimeout(f);var o=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(r)})),t)return t(r)},f=setTimeout(v.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=v.bind(null,a.onerror),a.onload=v.bind(null,a.onload),c&&document.head.appendChild(a)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="vue-movie/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,r,n,o){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var s=function(r){if(i.onerror=i.onload=null,"load"===r.type)n();else{var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=a,i.parentNode&&i.parentNode.removeChild(i),o(c)}};return i.onerror=i.onload=s,i.href=t,r?r.parentNode.insertBefore(i,r.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=r[n],i=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(i===e||i===t))return o}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){o=s[n],i=o.getAttribute("data-href");if(i===e||i===t)return o}},n=function(n){return new Promise((function(o,i){var s=r.miniCssF(n),a=r.p+s;if(t(s,a))return o();e(n,a,null,o,i)}))},o={143:0};r.f.miniCss=function(e,t){var r={194:1,229:1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=n(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={143:0};r.f.j=function(t,n){var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise((function(r,n){o=e[t]=[r,n]}));n.push(o[2]=i);var s=r.p+r.u(t),a=new Error,c=function(n){if(r.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,o[1](a)}};r.l(s,c,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,i,s=n[0],a=n[1],c=n[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(c)var l=c(r)}for(t&&t(n);u<s.length;u++)i=s[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(9432)}));n=r.O(n)})();
//# sourceMappingURL=app.cd762d11.js.map